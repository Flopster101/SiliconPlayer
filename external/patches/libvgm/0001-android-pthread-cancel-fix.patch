From 063f97ffed10537a17fb627394b45a7bf09579d8 Mon Sep 17 00:00:00 2001
From: Flopster101 <nahuelgomez329@gmail.com>
Date: Sun, 15 Feb 2026 01:48:48 -0300
Subject: [PATCH] Fix Android pthread_cancel compatibility

---
 utils/OSThread_POSIX.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/utils/OSThread_POSIX.c b/utils/OSThread_POSIX.c
index e3cd1e2..cbd445c 100644
--- a/utils/OSThread_POSIX.c
+++ b/utils/OSThread_POSIX.c
@@ -74,6 +74,7 @@ void OSThread_Join(OS_THREAD* thr)
 
 void OSThread_Cancel(OS_THREAD* thr)
 {
+#ifndef __ANDROID__
 	int retVal;
 	
 	if (! thr->id)
@@ -82,6 +83,11 @@ void OSThread_Cancel(OS_THREAD* thr)
 	retVal = pthread_cancel(thr->id);
 	if (! retVal)
 		thr->id = 0;	// stopped successfully
+#else
+	// Android's Bionic libc does not support pthread_cancel
+	// Thread cancellation is not used in our implementation
+	(void)thr;  // Suppress unused parameter warning
+#endif
 	
 	return;
 }
-- 
2.53.0

